{"data":{"site":{"siteMetadata":{"title":"Bruno Opsenica's Blog","author":"Bruno Opsenica"}},"markdownRemark":{"id":"eaf950d0-2295-5790-b34b-11ad1ab8cc98","excerpt":"Introduction In  the last post , I explained how to can calculate the exposure of the HDR image produced by a physically based renderer like the one I’ve been…","html":"<h2>Introduction</h2>\n<p>In <a href=\"/blog/exposure\">the last post</a>, I explained how to can calculate the exposure of the HDR image produced by a physically based renderer like the one I’ve been slowly building using <a href=\"\">BGFX</a>. This exposure allows us to basically “calibrate” our image such that we scale the luminance values to a range where we can now apply a tone curve. In case you didn’t read that, here’s the diagram from the last post:</p>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/ecff7f0a2babbe9a75e20c835f538967/7843b/tonemapping_pipeline.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 27.67762460233298%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsSAAALEgHS3X78AAABg0lEQVQY02NggALl7ouMDOm7WBmQAEvJPkGGtB3yDBEb5RjCNkozZO9SZMjcxY1QEcTIVb4fRQ/D////xd6/eSnM4NnNZN6+m+P+46eiX37/lzh7/a4IRP4V5///f0X+//8BxA+Zt+7dx3L9/hPxhy/fSZy7dkuAIWIFq3r7RjaFqcfEpaeeEGN49uzZr9evX98CaT5x7aH8u3dvnwH5/z9++HACJPby5auOz1++/H///v3fx4+fet27e0/n06dPX75+/fr/1es3K0BqVCcfttBcdvuP9sp7XxgePXr0/927dx8Yghk4V1zYYfDy5Yu/QEtABtwFqmV8+vrZvJ8/fv7/8ePH/wcvHkTuu7LP7j8UvH//dg/IQO/Z67yMdn/9b7nrw3+GP3/+3P369ctBkObtZy7JAdmn//79++jLly8bQYrff3hfCVTz+NevX/efPX/mfO3mNU2g4TdAat5/+DAVpEZ/2n5j9WV37qqvuH8NHpYcVU+YGDyWMjOQCmpvoEQKAAji42NUwhc/AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"Tone mapping pipeline\"\n        title=\"\"\n        src=\"/static/ecff7f0a2babbe9a75e20c835f538967/6255c/tonemapping_pipeline.png\"\n        srcset=\"/static/ecff7f0a2babbe9a75e20c835f538967/375dc/tonemapping_pipeline.png 148w,\n/static/ecff7f0a2babbe9a75e20c835f538967/6b157/tonemapping_pipeline.png 295w,\n/static/ecff7f0a2babbe9a75e20c835f538967/6255c/tonemapping_pipeline.png 590w,\n/static/ecff7f0a2babbe9a75e20c835f538967/dcf9c/tonemapping_pipeline.png 885w,\n/static/ecff7f0a2babbe9a75e20c835f538967/7843b/tonemapping_pipeline.png 943w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>A tone curve is a function that takes a luminance value (or an individual color channel) as input and spits out a value between [0, 1], which is what our display expects. There are <a href=\"https://www.shadertoy.com/view/WdjSW3\">many different curves</a> that fulfill this function, but most have the following features:</p>\n<ul>\n<li>A “shoulder” which is meant to map larger luminance values to values approaching 1, but this convergence is typically asymptotic.</li>\n<li>A “foot”, which is mean to control how the lower ranges of luminance are displayed. The foot is not as common or necessary as the shoulder, but it can help prevent darker portions of the image from being too dark.</li>\n<li>A linear or mostly linear portion, controls how your “mid tones” scale.</li>\n</ul>\n<p>The simplest example are probably the <a href=\"http://www.cs.utah.edu/~reinhard/cdrom/tonemap.pdf\">Reinhard curves</a> (Equations 3, 4).</p>\n<h2>Reinhard Curves</h2>\n<p>There are basically two Reinhard curves that people have used over the years. The first, simpler one is as follows:</p>\n<span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><msub><mi>L</mi><mi>d</mi></msub><mo>=</mo><mfrac><msup><mi>L</mi><mo mathvariant=\"normal\">′</mo></msup><mrow><mn>1</mn><mo>+</mo><msup><mi>L</mi><mo mathvariant=\"normal\">′</mo></msup></mrow></mfrac></mrow><annotation encoding=\"application/x-tex\">L_d = \\frac{L^\\prime}{1+L^\\prime}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.83333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">L</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.33610799999999996em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\">d</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.1982220000000003em;vertical-align:-0.7693300000000001em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.428892em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">L</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6778919999999999em;\"><span style=\"top:-2.9890000000000003em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">′</span></span></span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathdefault\">L</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.751892em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">′</span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7693300000000001em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span></span>\n<p>Where <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><msub><mi>L</mi><mi>d</mi></msub></mrow><annotation encoding=\"application/x-tex\">L_d</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.83333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">L</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.33610799999999996em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\">d</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> is the final display luminance, and <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><msup><mi>L</mi><mo mathvariant=\"normal\">′</mo></msup></mrow><annotation encoding=\"application/x-tex\">L^\\prime</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.751892em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">L</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.751892em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">′</span></span></span></span></span></span></span></span></span></span></span> is the exposure adjusted input luminance:</p>\n<span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><msup><mi>L</mi><mo mathvariant=\"normal\">′</mo></msup><mo>=</mo><mfrac><msub><mi>L</mi><mtext>in</mtext></msub><mrow><mn>9.6</mn><mo>∗</mo><msub><mi>L</mi><mtext>avg</mtext></msub></mrow></mfrac></mrow><annotation encoding=\"application/x-tex\">L^\\prime = \\frac{L_{\\text{in}}}{9.6 * L_{\\text{avg}}}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.801892em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">L</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.801892em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">′</span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.332438em;vertical-align:-0.972108em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.36033em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">9</span><span class=\"mord\">.</span><span class=\"mord\">6</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">∗</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">L</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15139200000000003em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord text mtight\"><span class=\"mord mtight\">avg</span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.286108em;\"><span></span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathdefault\">L</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31750199999999995em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord text mtight\"><span class=\"mord mtight\">in</span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.972108em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span></span>\n<p>This is a really easy way to effectively prevent any luminance from exceeding the max value of 1.0, while scaling lower luminance values (where <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>L</mi><mo>&lt;</mo><mo>&lt;</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">L &lt;&lt; 1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.72243em;vertical-align:-0.0391em;\"></span><span class=\"mord mathdefault\">L</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">&lt;</span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.5782em;vertical-align:-0.0391em;\"></span><span class=\"mrel\">&lt;</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span></span></span></span>) linearly (e.g <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><msub><mi>L</mi><mi>d</mi></msub><mo>=</mo><mi>L</mi></mrow><annotation encoding=\"application/x-tex\">L_d = L</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.83333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">L</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.33610799999999996em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\">d</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">L</span></span></span></span>). However, this is going to prevent you from ever actually having a luminance value of 1.0, so there is a second, modified equation that allows us a bit more control over higher luminance values:</p>\n<span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><msub><mi>L</mi><mi>d</mi></msub><mo>=</mo><mfrac><mrow><msup><mi>L</mi><mo mathvariant=\"normal\">′</mo></msup><mo>∗</mo><mrow><mo fence=\"true\">(</mo><mn>1</mn><mo>+</mo><mfrac><msup><mi>L</mi><mo mathvariant=\"normal\">′</mo></msup><msubsup><mi>L</mi><mtext>white</mtext><mn>2</mn></msubsup></mfrac><mo fence=\"true\">)</mo></mrow></mrow><mrow><mn>1</mn><mo>+</mo><msup><mi>L</mi><mo mathvariant=\"normal\">′</mo></msup></mrow></mfrac></mrow><annotation encoding=\"application/x-tex\">L_d = \\frac{L^\\prime * \\left( 1 + \\frac{L^\\prime}{L_\\text{white}^{2}} \\right)}{1+L^\\prime}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.83333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">L</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.33610799999999996em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\">d</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.95935em;vertical-align:-0.7693300000000001em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:2.19002em;\"><span style=\"top:-2.464em;\"><span class=\"pstrut\" style=\"height:3.15em;\"></span><span class=\"mord\"><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">L</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6778919999999999em;\"><span style=\"top:-2.9890000000000003em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">′</span></span></span></span></span></span></span></span></span></span><span style=\"top:-3.38em;\"><span class=\"pstrut\" style=\"height:3.15em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-4.1900200000000005em;\"><span class=\"pstrut\" style=\"height:3.15em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathdefault\">L</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.751892em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">′</span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">∗</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"minner\"><span class=\"mopen delimcenter\" style=\"top:0em;\"><span class=\"delimsizing size2\">(</span></span><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.97348em;\"><span style=\"top:-2.62642em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">L</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8051142857142858em;\"><span style=\"top:-2.1527714285714286em;margin-left:0em;margin-right:0.07142857142857144em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord text mtight\"><span class=\"mord mtight\">white</span></span></span></span><span style=\"top:-2.8448em;margin-right:0.07142857142857144em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">2</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3472285714285714em;\"><span></span></span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">L</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8278285714285715em;\"><span style=\"top:-2.931em;margin-right:0.07142857142857144em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\">′</span></span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6166399999999999em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mclose delimcenter\" style=\"top:0em;\"><span class=\"delimsizing size2\">)</span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7693300000000001em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span></span>\n<p>Where <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><msub><mi>L</mi><mtext>white</mtext></msub></mrow><annotation encoding=\"application/x-tex\">L_{\\text{white}}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.83333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">L</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.33610799999999996em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord text mtight\"><span class=\"mord mtight\">white</span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> is a user-controlled variable that allows us to set the saturation point. You can see how changing <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><msub><mi>L</mi><mtext>white</mtext></msub></mrow><annotation encoding=\"application/x-tex\">L_{\\text{white}}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.83333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">L</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.33610799999999996em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord text mtight\"><span class=\"mord mtight\">white</span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> changes the function using <a href=\"https://www.desmos.com/calculator/h8lpdqtlxi\">this desmos graph</a>.</p>\n<p>For reference, here’s three images that show gamma corrected outputs that use three different curves: linear (e.g. no curve applied), Reinhard and adjusted Reinhard:</p>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/ca32698aa9da16df7081cdcd32880c24/01e81/linear.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 56.25%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsSAAALEgHS3X78AAADFElEQVQozx2SXUybVRyHe2sUBYGKdFvdXBmja4Hy0i/aFdYvaF+6voWWMqCUlhZqy8qgY7A1VZTZOfBjOGQbIzNxKnHT6J03aubilZropSZeGE2MF7vwxiVG83j04uSXnPzO83/OyVFtn89xY6XA7oUS9+5c4++Hv/PXnw/48asP+fjyEq8u5theTLO7PM3e87MiU7y1mOCqWBdno5TGZc6nwpQSg+SjHlQ3y9NsVebYPJfi03cu8eDX73n4x2/8/N1nfPlGmZfncuysTrG9NMpuaYLNWYX1rEJVwFaSIQojnv9BWaWXmUgfqheyJ8lPisJ8jI92qsA//PT5+9zdeon3rq6xMh3l3Z08l88OcWUuxMbMIMuTPopjHnITDjKjdk7HfRTifnIxL6pCvI/n4h5KyQCXzia5/8Un3KwucX2txJ1bGyykgmxUJilOy5TF0P/6Z6bcLGT8zCadnBq2MixbGQ/3IPuNqIojQlUAZ0ZEIT5AzGtGcUtMxG1kUl0s5IIUMwNMxCxUFtLElS4GgkcZiphQIu145DYcHh19bh09fQdQZRQH4YAFeUAiET1OdszPm+sJ4hNmxk5ZWT2XZXW5wHi0FyXQQThswCcfFoe1OH3P0OM9yIngIZzeA9i8zajSUzbkSCfzZ3qZL7p4saJQWuzHKyZ7fHry6RBRRUIOtJMRbxaUW7C79uHyarH1NiM51Lh8GvyyFrNLjWpkXJikbVzbSrF3O89rF92kEwbcvoPCQoPd3kyg/zDdZg0eRytjIR0OZxP2E0/T5Wik09YgskHkkyLrUS2Xvbx9OymuFmHveo4fvqlwpTpMqP8IDmsjXreewswQhbRCLOhC0muxSE1IlgaMpjoMXbUcMz+B3lyDyVkr/uGmm7WqzOn8ceKDh7h7K8YrF9yMhoz0SE/RbajF2qEWqcHY2kSbTkN7+z5hqBFGagGpp9MuoN2PobfUofr6XprX16Oc7NeRCDdy/wM/v3ybpFzswGraj+FILfpnH6FV+yjGljo6jqrFfgsmaT/GbjVt0uMCVoOxs0aY1vMvEnjCXkZy590AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"Linear tone mapping\"\n        title=\"\"\n        src=\"/static/ca32698aa9da16df7081cdcd32880c24/6255c/linear.png\"\n        srcset=\"/static/ca32698aa9da16df7081cdcd32880c24/375dc/linear.png 148w,\n/static/ca32698aa9da16df7081cdcd32880c24/6b157/linear.png 295w,\n/static/ca32698aa9da16df7081cdcd32880c24/6255c/linear.png 590w,\n/static/ca32698aa9da16df7081cdcd32880c24/dcf9c/linear.png 885w,\n/static/ca32698aa9da16df7081cdcd32880c24/43c8a/linear.png 1180w,\n/static/ca32698aa9da16df7081cdcd32880c24/01e81/linear.png 1280w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    \n\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/5ee6b90a6aa4d32807d902b8d12810fa/01e81/reinhard1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 56.25%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsSAAALEgHS3X78AAADB0lEQVQozxWR3U+bZRjG31PjNsdY2VZkSBgbpaUrvP1uaWn7Qr9bPtrS0kI/6MdaoE3BbUxgLJARQOoWN2M0U7OZ6DIT46k7WUw8NdETzzXxaIf+AT8fD+5c95Nc9+++nueRjlt5TpslPmk1eNHZ5a/ffuTtn695/fyYZ9urHDQKnDSyPFrP8vnmstCMOKc4ErVTjNNcCLCZC9PMBKjNepAetbMcbazwcH2RZ8eb/P7ma/7+4xVvXn3Gy70WO5UiJxsLnKzN8biR5KgYZj8f4b6AbWRD1OY9VAWoFHOxEnch3c0HqWQi7NRm+OrjLf59+w+/fPuELw7v8OXRR7SXZ+gc5NithzisBNgv+GkveqkveCinbRSSFuoJHzVR5TkvUi0xQTnhoZmdZnctxU/fd3i8XaFzr843Tx6wtuRn//YC5cwUrfIMVeFfzbpZzfsoZe2kZs3Mhiykw2ZCig6pMT9BSQBL8z5WEtMkFCtxr5H0vIV8zkBdDFZzCsmYTLuaJRE14A8OE48ZiMX1eIMaHN4h3J5r2N19SMWojVjARMgvszjnFFfwsL8VI5GRSSZMbNxapl2rkIw6ifpHiUZGUIKD2Cf7cSj92JUPmAwM4PD1YfVdQcotmgnE9FSrVmpVG7dbCvWaCyWkYdKnoZjxE4+MEZgeJZ+y4A8MYnP1MuG7itWlxujoEb1aLOnD5FIhzaeNpJaMPHwww9PTJHsf2lhKj+CdGsDmVmOxXEHxDSCb1Lit10mKdE7nZayTl5EdKgzWbsYdFzHYLgjtRlpvOjk9ibJ5S+HTvTg/f5fj4K6XyPQQDosKj1tDIRcVSSNEp5wYtVcxywJmvoh+vAudfB6t6RwjpjOMOd9DOt61cmfLSaUgM+fv5+mhwvaahVRYi914CaPuPJabPULV6G9cYuRaL3p9LzaPWiRSCUi3SPc/9AxacxfSD8/D3L/nIyIeNxVS8bJj49cXQfGjOqzjfehuCPPgOwz3v4v+ehc3h3uwjA0xJr+P3tiDRj6H1niWUcNZdKYL/Afpj68Q02/mqAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"Simple Reinhard\"\n        title=\"\"\n        src=\"/static/5ee6b90a6aa4d32807d902b8d12810fa/6255c/reinhard1.png\"\n        srcset=\"/static/5ee6b90a6aa4d32807d902b8d12810fa/375dc/reinhard1.png 148w,\n/static/5ee6b90a6aa4d32807d902b8d12810fa/6b157/reinhard1.png 295w,\n/static/5ee6b90a6aa4d32807d902b8d12810fa/6255c/reinhard1.png 590w,\n/static/5ee6b90a6aa4d32807d902b8d12810fa/dcf9c/reinhard1.png 885w,\n/static/5ee6b90a6aa4d32807d902b8d12810fa/43c8a/reinhard1.png 1180w,\n/static/5ee6b90a6aa4d32807d902b8d12810fa/01e81/reinhard1.png 1280w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    \n\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/4b6ce875b7468281c16fa9f05e3278e5/01e81/reinhard2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 56.25%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsSAAALEgHS3X78AAADCUlEQVQozx2SW0zbVRzH/69GmUMGYhHrHGxAS2npv/fS0hu90Bvrjd6gpaylFMtl3dzCKiyT4QbiavYAcTHGmIxEkyXzzTdioonGZx9MfPFFn4xvvpiPxz2cfB/OOZ/v55dzpIONEkcbyzzabPC0s8Ofv57x9+8/c3Z6xGftNT5olDlsFOg0C5y0FkXmOGhkeCDWnaU4zfkArWKY9VyQ2lUX0sdbBR62ltlv5vn8oxv88uMz/vjtO354/ilf7a7Tri5x2Mpy+O5VOo00D8ph7pUi7AjY9XyIlYTrBWgp5qAScyK9txiimovQrsX5ovM+//7zF9+fPubJh7d5cnCHrYU4nf1Fdhqz7FeD3CsH2Mq5Wc24WM5aKKfN1FMeakkv1xJupJWkg2spN838DLvrWb795pjHO3U67SZfHu+xVvSzdytHVexvVufERQeNgpO1kodKwUpmzshcyEQ2bCLkUyOtJoRqykVFNFSSMyTcJmJumWzSRKmgpVH2USv6yMRlWvUiqagOf3CEWExLNKbBHRrF5h7G6RrC6hxEKketRAMGQgE9uYRdjOBmb3uOZFZPOmXgxlqJ66s10rEpov5xIuExvMFLWKeV2LxKrN63mQ5exOYZxOxRIBXzRgKxCep1Kys1K7e2/DTqTryi2eUdpZIPEo/oCArYYsZMIDiExTHAlEeJ2aFAtvUx5VWIkkEMjj6kZFYms2Dg4V6C4848d29aKc6P4fZdxOJUYDa/gc/7DrJxgGnLZVLCzm7vx+LqR2/rRWvuYdJ2Aa3lNZE9SBubDh4dxbi5OsPJ/SRnz8rc3/YRnhnGburF5RSWC1HxABFifjuy6i2MegEzXkAz2Y1afx6V4Rxjhi509leRDnet3N52UivLJANKTg5maDctpGdVWPWvI6vPY5roE6lAc6WfsaEBNJoBYah4YThp7xF2/0NfQWXqRnr+NMLdtp+wGHF+tpevP7Hx02lYfBE15slBxq+Iw5deYkT5MprL3UyM9GHSDaPTv4lG7mVUfw6V3MW4tgu1oYf/AMwDsqbpC1ThAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"Modified Reinhard\"\n        title=\"\"\n        src=\"/static/4b6ce875b7468281c16fa9f05e3278e5/6255c/reinhard2.png\"\n        srcset=\"/static/4b6ce875b7468281c16fa9f05e3278e5/375dc/reinhard2.png 148w,\n/static/4b6ce875b7468281c16fa9f05e3278e5/6b157/reinhard2.png 295w,\n/static/4b6ce875b7468281c16fa9f05e3278e5/6255c/reinhard2.png 590w,\n/static/4b6ce875b7468281c16fa9f05e3278e5/dcf9c/reinhard2.png 885w,\n/static/4b6ce875b7468281c16fa9f05e3278e5/43c8a/reinhard2.png 1180w,\n/static/4b6ce875b7468281c16fa9f05e3278e5/01e81/reinhard2.png 1280w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>While these curves were some of the most popular to use, they have their limitations. John Hable’s blog post from 2010 does a good job of demonstrating and discussing why people have started moving away from Reinhard curves. You can see in our reference images that the simple Reinhard really removes most of our highlights, while also washing out our blacks. The adjusted reinhard has better highlights, but that’s completely determined by our choice of <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><msub><mi>L</mi><mtext>white</mtext></msub></mrow><annotation encoding=\"application/x-tex\">L_{\\text{white}}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.83333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">L</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.33610799999999996em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord text mtight\"><span class=\"mord mtight\">white</span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span>. If our value is too low, then we’ll get more and more blown out features like with the linear version, but as <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><msub><mi>L</mi><mtext>white</mtext></msub></mrow><annotation encoding=\"application/x-tex\">L_{\\text{white}}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.83333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">L</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.33610799999999996em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord text mtight\"><span class=\"mord mtight\">white</span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> grows larger, we’ll end up with something very similar to the simple Reinhard.</p>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/0538b9a3fb3721c588173236e04e00bc/fa5e9/white15.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 58.65834633385335%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAA7DAAAOwwHHb6hkAAADXUlEQVQozxXRW0ybBRjG8d5qYgJTDtkyoBVkrGuhME4tB2lL13M/KIwe0nYtXTkUSqFshVHKmTLQdLCFjW10sg1jwEQTEZbIhXGJdybGxHhh4oVGk12auBjjxd/Pi/f29z7P+0oS4T7WUjc5Pn7BzodrjHqs+Pu6GPI7GfI5WUunuHNrglQ0QCzkITkYID3kY2kiwtJIAK9gQd/egr5Nja6tGUl3Rx2OzhYmE+MMBP10NiiIBbzMxiLsrCT48WSfn0+e8nI/y8FGksMPZji+PcHp1gwv7yQwmZxIq7WUy5uorKhA0tph5nJHN5VKNW8XFCGTybibHCY3m+TrT+7zz+vf+fuvP/j1dI/PM7fYmRnn+Ww/B8sjfLbQT2urAWm9g/IaHRcqK5GoTUZUdoHLgkDJRTnvnivg07UxPs5Mcvp8ndevfuLVL9/xw1GOg5UpHiyP8eV+lAc33RykAjQrysnLy6e4qJCCd84gsWlVWA1qrok1g6EwsXCQu5NuFuMevthdgX//5PuDLLlsmo2pEMvjXnJbQTGph9xqD40qKfl5eRQVnqGwQATHr7aRDunIJh1sL7rZy3iZj5hJDThYv+Fj794S6cFedrOLPFqfJuxSsxAz82jZTjqh5YLsPG++8ZaYMk+E85HE3Tq20w421+1kN2ycfNTDSvgKYY+ReFAg3KtnwG/mul/LXMzF9KSe1fl25ucaSSbVeL1KNG1lNKhLqW0qQZKZMXL8JMLthED8upGRsIFoqINAUMNgpJVk3EvqRpA+Z4O45H0yKzb2nrjw+evo7pPjDyrwXFPi8lVj7RKfsr3l4OE9J/2RelyeOkZHdISj7SysCmxuujBbLtKhl2K1yel1KOkSZMwlNWyuaVmYqsFqL0FnkqI3yzBYy5H0eGvocV/C2adkespM7vEoSxkjO/c9HO5GuepSYbEpsVlq6XY0YtGVYWorZ9TXyFZaz8JYLXZzCQZxOu2l/4NKEVPgdCqJDrZzejTE0WEPi0sOhgNyHm92MxwyMC1Wj4ZNNCjOUltVhqqqlHqFDKNGiVVbgU5bjN4q3tDSW4UgVCLYKkiNafjt236+OXQzF28hM1rNV7krvHhmwt31Hk3V+ehbimmpLaau6hwquYhfOk+9Ukpz01k0rYX8B/J4/TLdeo9BAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"White point of 1.5\"\n        title=\"\"\n        src=\"/static/0538b9a3fb3721c588173236e04e00bc/6255c/white15.png\"\n        srcset=\"/static/0538b9a3fb3721c588173236e04e00bc/375dc/white15.png 148w,\n/static/0538b9a3fb3721c588173236e04e00bc/6b157/white15.png 295w,\n/static/0538b9a3fb3721c588173236e04e00bc/6255c/white15.png 590w,\n/static/0538b9a3fb3721c588173236e04e00bc/dcf9c/white15.png 885w,\n/static/0538b9a3fb3721c588173236e04e00bc/43c8a/white15.png 1180w,\n/static/0538b9a3fb3721c588173236e04e00bc/fa5e9/white15.png 1282w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    \n\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/537799a08fe52dbbc705d7ec4a6a44b1/fa5e9/white3.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 58.65834633385335%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAA7DAAAOwwHHb6hkAAADUUlEQVQozx2TW0ybdRjGe73EWJhsTGfpGIxTCysr0HKYlFJp+fqtB6C0pfSjpcAop0E5rYXSdQ6kTDIGhB0ibhkxiMRomMbtWo1XHmK8M97OeKcXXpn8/MeLJ3mvfs+T58mrmo72sJqc5cuvvmbv7hpjfol+n5uRfi8jfR5Wl1PcnZ9icSTE+ECAxFA/qeE+0hODrIyGUEIRZG8Y2RPCKaRyt9YiW5uYmZlmOBKmvU7HeDhIcjzGdmaK748e8cPRHi/313l2Z5qD1Xk+uz3BycYcL9cncDiDXGrwUG60U6W/gqrZ4sBo8VKmN6FW51OkOc/mzBAPbiZ4/jjH369+4q8/fuSX4/sc3ppjZ2GC/UWFZ+kRDpcGaDK/w4UrEiWGdspKL6Iy2zuokV0Y3W40lZVcOHeag2ycJ9kbfPEww5+/fcPvP7/gu8MdDjIJttJjfPJIpE/4OFgI0aArQZ2XT+HZMxS8cRqV03IZyWZmQOkjOhhjIhbhgxs+0VEvx3sZ/v3nFd8+XeNhLsnarEJm0s9uLiSS+tjLuKmrKSJPreZsQT4FQqqp7haSA23kEjJbyz4eZ/0sx+zcjF1jdSbI/r0US8Nett9Ps/3eHNFeM+kxB7srEqmpVsqKz3Pq1GuoX1cLcJ4A+tu4tyiRu+1gTejTHZls9F0GAx1MKi6i3VaGgh1E+lpZGuthVkAyyWaSyToSCRN+v57GFi31Zg2GBg2qW/M2jnfC3Jl0MilA8Wg71wda6VcaGY6J9cf9zE+H6fEYifqvklm282DXQ1+oFo+vipCiIxDW0xuqRnKXodrMdbK1IROJGekN1BIftRAdbWEpI7Gx7sbuqKDVqkVyVtIt63C7iknOmMhlr5JKCIisoc2upd1RjM1ZgqorWEOXX4fXp2du1ibcI6xk2rm/6eVgW6Gruxq7pEdyGHA56+ls02JvuUg8aGRjXtQQv4zs0GDrFLpWJIAB/f8wr7ea0aFmTj5WOPpIJp22i08pF2M4GVJsJOIBhpUO6vVvUluhxVBRRJ2+mI5GYWYpxWopxCqJDju7y3G5yoR7KQtjJn59HuDFhx5S4s5e13GybeHzvTb8nkuYavKwNhfSZCgU0LcwVAm47m3qqrWYTedobD7DfzYy9PhWrc7+AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"White point of 3\"\n        title=\"\"\n        src=\"/static/537799a08fe52dbbc705d7ec4a6a44b1/6255c/white3.png\"\n        srcset=\"/static/537799a08fe52dbbc705d7ec4a6a44b1/375dc/white3.png 148w,\n/static/537799a08fe52dbbc705d7ec4a6a44b1/6b157/white3.png 295w,\n/static/537799a08fe52dbbc705d7ec4a6a44b1/6255c/white3.png 590w,\n/static/537799a08fe52dbbc705d7ec4a6a44b1/dcf9c/white3.png 885w,\n/static/537799a08fe52dbbc705d7ec4a6a44b1/43c8a/white3.png 1180w,\n/static/537799a08fe52dbbc705d7ec4a6a44b1/fa5e9/white3.png 1282w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    \n\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/d386efd269d49de6a43fd683d99425ca/fa5e9/white5.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 58.65834633385335%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAA7DAAAOwwHHb6hkAAADT0lEQVQozx2RTUzaBxyGOTdZpm4627VibSt+gBaHIhYjiFbgD4IgX4KggBYFP0CGForKohZbF0SjXdO16UiqW/Zhl6Xpkt269LIly25LdtqyZMcedtvp2T87PMnv9OT9va8kGXaxnU3z3YuXHN2/S9wrMOm2cyvgYNY/xk4+x/3MIqu3/MRDXlZmAmRnJsgnwuRjAUKBaayOIJaxgIgfiV3XhcXQx3JqmehUEEO3nPikj2w8QnljkdenD/jp5IiXnxb5bGuZyvaHfPVRgm/vpfm+mMAkTNDcY6NFZaS9oxuJVm+iW++kWa6mqroG6aWL7CWjHK+leP5ghzd/vubNHz/yy+clTjbTHGQSPF4NUsnPcpIL0afRcVk5wlXlMDJZCxKNcYTrozY+sNloaGvj8vl3qBTmeFJY4pvjdf7+7Qd+//mMV8/KVDZSlPLzPDsOc5ByUcn4Ucuv/B+kvq6O2ndrkAi6ToRhDVMhP+FIlERkir0ll9iRhy9F4b///MWrJzt8snub7ZUQGwseDu9OcJhxc7xhQ9Uppbqqivdqa6gVkSyNa8mG9OymLJRyLh4WPNyJGFmLWtlO+nj0cYY7M3b2t/LsF9KE3b3k40YO82aySzpkTRc5d+4tqt6uEsXVotA7SGnVTLFgZFvktGyhMD1MxDvCYmiUsNPAjO8mUxM6cvPjrCwMsL52g9trKlZSvXg8cvq0Uno0DSjVDUg200N8UQ6wtSCwIIrmw0PEQgMEghpmI+L6817SS0FcdhXTnn7Wczc5OrDhDygZc7fjD8nxBhW4/R0IdhmSvaKJUtHCVESFx9fFXEzPdKyf3LqYemcUo6kVnaERs6UNp1WO3dbEWlJNcbOfbFKBYG1g0NiIwdTEsHAViXOiE6dXjsOtIJ0ycFQOkl83sH/PztOSH4dTgdGswGxUMir0YB5sxNh/hTmfit30ANnYdaymBoZFhqxSUehT4HCJQkcHsaiWs0qA00cCOfG1WZ9MHMNMdHKIZMzLTHCEHsUFlK2NIlK6FU2M9Ikp9dcw6OsxCGKH5vEWRm0ybJZrZObU/Hrm5sVDG1nx3pyV83xfx9eHerxjzfR2VmPQ1nNDWU9X6/so2y/QJb9Ed0cjmt7z4jh1/AejM/Io+fP/yAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"White point of 5\"\n        title=\"\"\n        src=\"/static/d386efd269d49de6a43fd683d99425ca/6255c/white5.png\"\n        srcset=\"/static/d386efd269d49de6a43fd683d99425ca/375dc/white5.png 148w,\n/static/d386efd269d49de6a43fd683d99425ca/6b157/white5.png 295w,\n/static/d386efd269d49de6a43fd683d99425ca/6255c/white5.png 590w,\n/static/d386efd269d49de6a43fd683d99425ca/dcf9c/white5.png 885w,\n/static/d386efd269d49de6a43fd683d99425ca/43c8a/white5.png 1180w,\n/static/d386efd269d49de6a43fd683d99425ca/fa5e9/white5.png 1282w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<h2>Filmic Curves</h2>\n<p>While Reinhard is clearly better than nothing, the industry has appeared to move towards other curves that are more customizable, especially in terms of how they behave towards the extremes. Romain Guy created an excellent <a href=\"https://www.shadertoy.com/view/WdjSW3\">shader toy</a> demonstration of these different curves, which I’ve modified slightly, adding the two reinhard curves.</p>\n<p>To apply the curves, we can write a simple fragment shader that takes our HDR PBR output, the average luminosity (store in a 1x1 texture) and writes the output to the backbufffer:</p>\n<div class=\"gatsby-highlight\" data-language=\"glsl\"><pre class=\"language-glsl\"><code class=\"language-glsl\">$<span class=\"token keyword\">input</span> v_texcoord0\n\n<span class=\"token preprocessor builtin\">#</span>include <span class=\"token string\">\"common.sh\"</span>\n\n<span class=\"token function\">SAMPLER2D</span><span class=\"token punctuation\">(</span>s_texColor<span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token function\">SAMPLER2D</span><span class=\"token punctuation\">(</span>s_texAvgLum<span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">vec3</span> rgb <span class=\"token operator\">=</span> <span class=\"token function\">texture2D</span><span class=\"token punctuation\">(</span>s_texColor<span class=\"token punctuation\">,</span> v_texcoord0<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>rgb<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">float</span> lum <span class=\"token operator\">=</span> <span class=\"token function\">texture2D</span><span class=\"token punctuation\">(</span>s_texAvgLum<span class=\"token punctuation\">,</span> v_texcoord0<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>r<span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">vec3</span> Yxy <span class=\"token operator\">=</span> <span class=\"token function\">convertRGB2Yxy</span><span class=\"token punctuation\">(</span>rgb<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">float</span> middleGray <span class=\"token operator\">=</span> u_tonemap<span class=\"token punctuation\">.</span>x<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">float</span> whiteSqr   <span class=\"token operator\">=</span> u_tonemap<span class=\"token punctuation\">.</span>y<span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">float</span> lp <span class=\"token operator\">=</span> Yxy<span class=\"token punctuation\">.</span>x <span class=\"token operator\">*</span> middleGray <span class=\"token operator\">/</span> <span class=\"token punctuation\">(</span>lum <span class=\"token operator\">+</span> <span class=\"token number\">0.0001</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  Yxy<span class=\"token punctuation\">.</span>x <span class=\"token operator\">=</span> <span class=\"token function\">reinhard2</span><span class=\"token punctuation\">(</span>lp<span class=\"token punctuation\">,</span> whiteSqr<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  rgb <span class=\"token operator\">=</span> <span class=\"token function\">convertYxy2RGB</span><span class=\"token punctuation\">(</span>Yxy<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  gl_FragColor <span class=\"token operator\">=</span> <span class=\"token function\">toGamma</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">vec4</span><span class=\"token punctuation\">(</span>rgb<span class=\"token punctuation\">,</span> <span class=\"token number\">1.0</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>The code is fairly simple, and the process is simple:</p>\n<ol>\n<li>Transform the RGB value into CIE xyY color space, where the Y is the luminosity</li>\n<li>Adjust for exposure</li>\n<li>Scale Y (and only Y) using the tone curve</li>\n<li>Perform the reverse transformation (xyY -> RGB)</li>\n<li>Apply gamma correction and write the results to the backbuffer</li>\n</ol>\n<p>Using the different curves, we’ll get different results:</p>\n<figure class=\"image\">\n![Unreal](unreal.png)\n![ACES](ACES_per_channel.png)\n![Uchimura curve per channel](uchimura_per_channel.png)\n![Lottes curve per channel](lottes_per_channel.png)\n<figcaption>\n<p>From top to bottom: the Unreal curve, ACES curve, <a href=\"https://www.desmos.com/calculator/gslcdxvipg\">GT Curve</a>, and Lottes Curve.</p>\n</figcaption>\n</figure>\n<p>Each of the tone curves will produce a slightly different “look” to the final image, but it should be obvious that the filmic curves produce a vastly different image from the others. The filmic curves produce a less “washed out” image than the Reinhard curves.</p>\n<p>I should also note that the choice to apply the curve to the Luminance values exclusively rather than each RGB channel individually is a choice. John Hable <a href=\"http://filmicworlds.com/blog/filmic-tonemapping-with-piecewise-power-curves/\">advocates the latter approach</a>, but this will result in shifts in Hue. <a href=\"https://www.ea.com/frostbite/news/high-dynamic-range-color-grading-and-display-in-frostbite\">This presentation by the Frostbite team</a> provides an example of hue preserving vs non-hue preserving tonemapping. In the end, it’s a choice you’ll just have to make! I tried out both methods, and I think that John Hable is probably right here. Applying it solely to the luminance produces some weird behaviour, especially around the sun and highlights, but it also clearly shifts the hue of the final image.</p>\n<figure class=\"image\">\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/3e68fead053edd3f5ee68c66979039f9/01e81/uchimura.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 56.25%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsSAAALEgHS3X78AAADFUlEQVQozxXNT0ybBRjH8fek0bFB13UdbFDKoLxtt5ZSCrRdoe0rf0q7Dt42VAovf1qgzUptXaEd0zAXBuIWImRjEweLxOi2RBO96EUTtoMmauJVL/PkaYkeTEyMh6+vhye/X57k+TzCveUsu8s59q4tcvj4Lv/+8QP//Pkzvz79mC9uX2WzlOXelTR7lTSPr2fZr6TYKSncKU2ymolTGAtRmY5SHB9ibtiPsP/2LDsrebbLKb46eJcXz7/m7xeH/PbTlzzbXmFtIcMH16e5vzTG3qLCVmaY9+aGWVOx8mSEedmvQr1Mhr1MRy4grMxGmEtGWC+M8vnuTeAvnn/7iM92VvnkziqVVJyD+1k2SiNs5aPcmo+wOPEalxMBZl93MxXvIhsPMh+TSI8EEDIxH+mYnzeVQdauTPD0m30+XMuzc6PIk/0NitNDbLylkFEGWMrJzMd95BU/b6T6mJ3wIl/sINLnJDbQQdAnIlyWfcyo4IwcJBXrI9rjZMBrY3TExYziIKceZqf6iF9sp5ybZDhkwx9sJqxmaMiKV+3t3Q10quNwnUJQhroYCLQR9NtIXPKgxHp5fz1BLNGOLDupFKYpFzPIES+hoJXQoEhP0KAe1+L0nMbhOYM7UK/2WuxunQomXUghK7mcl4Wcj5WrYQr5ID6pBfeFFlLjg0RC/z+0MDXaTSBgxN6hx+Wpw9ahw2w/rnY9vdJprM7jCHLCyaji4u5WkkcHKW6/40dJWFSsnvZOPXabjt4eA2arjm6nEbnfSJtDi73zhIppMJ2rRrTXYDp/TM1qhFLZz8OPxrhWDHOwPc4v3xfYXA0h9TbRdk6Dp9tEeipKeiLCkOTG1KjHImoRrTU0mY5iNFVhNB+hUXwF0VGFsLvp58aqRGa2i6hk4MmDS9xc8jHcL3LerKXVWIW1RYPYpKOpXkNDnZazzSdo69JjblP3jmpMNhVVQaPlKMKPh0lurYeRfA3E+rU8+1Ti9++SLC/YsJhO0nimivpTL1GrfRlDXZWK1mBtbcAknuSsqMHQegRj66sYm1XQfIz/AMflsm+Uvu3VAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"Uchimura curve\"\n        title=\"\"\n        src=\"/static/3e68fead053edd3f5ee68c66979039f9/6255c/uchimura.png\"\n        srcset=\"/static/3e68fead053edd3f5ee68c66979039f9/375dc/uchimura.png 148w,\n/static/3e68fead053edd3f5ee68c66979039f9/6b157/uchimura.png 295w,\n/static/3e68fead053edd3f5ee68c66979039f9/6255c/uchimura.png 590w,\n/static/3e68fead053edd3f5ee68c66979039f9/dcf9c/uchimura.png 885w,\n/static/3e68fead053edd3f5ee68c66979039f9/43c8a/uchimura.png 1180w,\n/static/3e68fead053edd3f5ee68c66979039f9/01e81/uchimura.png 1280w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    \n\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/2a7070240ba6cd9e16e5fbb4ff2030bf/01e81/uchimura_per_channel.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 56.25%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsSAAALEgHS3X78AAADHUlEQVQozw2PTUzbBRyG/4fJVqiQAm4yPltKvyilLWsp/WDQUmnL1q4tW5uWUmlLkUIHg+6jK8E5dOAwU9kC24QYZ0gwmOjJg9k0WaLxYOJFDyaamJiY7OKFg17M4//wy3t4k+d9fsJOeYbH5Tn2KiW+OXzEv0d/8c/RC355fsgXd69yb3mGnaU0e9enOLiVFzPN9lKCB+K9nQ+xHB/hZtpHKTFCIWRH2F3JsL06z9a1NF99usGLP37i6O8/+e3Hr3n2QYU78+Lgm0keXh1nbznOVt7PZi7Aej7IjdRrFMJ2ZkMDZAMWpsesCCuZUd5I+FlfCPPl3gbwH78+3efz7TX2779FOXOBJw9zbCwF+HB+lM3pEa4lXRRjDvJxE5lxI8Wok0LExcwFB0IhYmUm6mA5NcxGKcHzp4d8tLbAo7VFPtt9hytpN3dXYhRSHm4UgsxGbVxODbCYGSQ30cf4eQNBr4GLoyY8rk6EYtjKdNTOdNhFPjJExKVnzK4hHjGQmdRQzLoppM8SCxooz6cIB7QMuVs5F9DgH1Ni97RhGmjCamvCaK1HmPKb8A13MzKsIRHqY2rcxb07lwjHdUQjPVQWJqks5hg/ZyPgVuP3KXB6XsXY34jJ2YjRcRKb+xRmRwMGRx3CZNKAO6Bkrmhlbs7CatnH5eIgzpE27C45uaSX8369OKji9Vgfw54WDBYZZxyN9Fjq0BhfxuKU4fK8gu6MFCES03FxsocHW0n2P8ny7q0BJmIKEXYSU7+M3l4ZQ2eb0XXLsJvbiHibMZlrMfTXoTZK6eqpQW2qQWmQoDJWI5RuOnn8cYLKlQBP7mf5+Ycy790O4B1swayX4rApyKfHyE/4CXr60XY0oteIZt01KFQSOtQnaNcdp01Xhcp8AmHnfTurtz3ksxbC3tMc7IZYK9lFEwW9mlq0cgk9XbXoFA10ttbR3lRPZ5doPiATzaQipJquXhGqfYn2btHwu2cTbK4H8TqbueST8u3BIL9/n+D6rBK9qh55i4T2U8doaTiG/LREhIrvqptRacVOK6VVc5wObRVyZZUIreZ/V2ewWksYhOUAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"Uchimura curve per channel\"\n        title=\"\"\n        src=\"/static/2a7070240ba6cd9e16e5fbb4ff2030bf/6255c/uchimura_per_channel.png\"\n        srcset=\"/static/2a7070240ba6cd9e16e5fbb4ff2030bf/375dc/uchimura_per_channel.png 148w,\n/static/2a7070240ba6cd9e16e5fbb4ff2030bf/6b157/uchimura_per_channel.png 295w,\n/static/2a7070240ba6cd9e16e5fbb4ff2030bf/6255c/uchimura_per_channel.png 590w,\n/static/2a7070240ba6cd9e16e5fbb4ff2030bf/dcf9c/uchimura_per_channel.png 885w,\n/static/2a7070240ba6cd9e16e5fbb4ff2030bf/43c8a/uchimura_per_channel.png 1180w,\n/static/2a7070240ba6cd9e16e5fbb4ff2030bf/01e81/uchimura_per_channel.png 1280w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<figcaption>\n<p>The <a href=\"\">GT Curve</a> applied on luminance, and per RGB channel, respectively.</p>\n</figcaption>\n</figure>\n<h2>A note on Gamma Correction</h2>\n<p>I won’t go into gamma correction in great detail, but it is an <em>essential part</em> of not only tone mapping, but working with color values in computer graphics in general. But in order for our image to appear correctly even after tone mapping, we need to apply a gamma correction. If you don’t know much about Gamma or what I’m talking about, here’s a few great reads:</p>\n<p>[LIST of entries]</p>\n<h2>Code Sample</h2>\n<p>There’s a working example of this code running as part of a BGFX-style example here: <a href=\"https://github.com/BruOp/bgfx/tree/tonemapping/examples/41-tonemapping\">https://github.com/BruOp/bgfx/tree/tonemapping/examples/41-tonemapping</a></p>\n<h2>References</h2>\n<p>While I’ve tried to diligently link to my references, I also have a general collection of links on tone mapping <a href=\"https://github.com/BruOp/3d_programming_references#tone-mapping\">here</a>.</p>\n<!--\n## Wrapping up\n\nIf you read the last post, recall that I presented the following image as output from my toy physically based renderer, **without** tonemapping:\n\n[IMAGE]\n\nNote that this image has Gamma correction, but the luminance values are still outside the display's range. It is technically physically correct, but our display doesn't care. Here is the same scene with tonemapping applied using :\n\n[GOOD SDR IMAGE]\n\nHopefully the stark difference demonstrates the need for tonemapping if you are attempting to implement PBR shading _with actual physical values_ for your lights. -->","frontmatter":{"title":"Tone Mapping","date":"April 12, 2019","description":"A guide to adding tone mapping to your physically based renderer"}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/tonemapping/","previous":{"fields":{"slug":"/exposure/"},"frontmatter":{"title":"Automatic Exposure using a Luminance Histogram"}},"next":null}}